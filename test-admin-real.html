<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Admin Real - HuertoHogar</title>
    
    <!-- Estilos -->
    <link rel="stylesheet" href="assets/css/normalize.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/admin-panel.css">
</head>
<body>
    <!-- Barra de información superior -->
    <div class="top-info-bar">
        <div class="top-info-content">
            <div class="info-left">
                <span><i class="fas fa-truck"></i> Despacho gratis desde $15.000</span>
                <span><i class="fas fa-clock"></i> Lunes a Sábado 9:00 - 19:00</span>
            </div>
            <div class="info-right">
                <span><i class="fas fa-phone"></i> +56 9 1234 5678</span>
                <span><i class="fas fa-envelope"></i> contacto@huertohogar.cl</span>
            </div>
        </div>
    </div>
    
    <header class="main-header">
        <div class="header-content">
            <a href="index.html" class="logo-container">
                <img src="assets/img/Logo Huerto Hogar.jpg" alt="Logo de HuertoHogar" class="logo">
                <h2>HuertoHogar</h2>
            </a>
            <nav class="main-nav">
                <a href="index.html">Inicio</a>
                <a href="productos.html">Productos</a>
                <a href="nosotros.html">Nosotros</a>
                <a href="blog.html">Blog</a>
                <a href="admin-panel.html" class="admin-link">
                    <i class="fas fa-cog"></i> Admin
                </a>
            </nav>
        </div>
    </header>

    <main class="admin-main" id="admin-main-content">
        <!-- Header del Panel de Administración -->
        <section class="admin-header">
            <div class="admin-header-content">
                <div class="admin-title-section">
                    <h1 class="admin-title">
                        <i class="fas fa-cog"></i>
                        Panel de Administración - TEST
                    </h1>
                    <p class="admin-subtitle">Gestiona los productos de HuertoHogar</p>
                </div>
                <div class="admin-actions">
                    <button id="add-product-btn" class="btn btn-primary">
                        <i class="fas fa-plus"></i>
                        Agregar Producto
                    </button>
                    <button id="refresh-products-btn" class="btn btn-secondary">
                        <i class="fas fa-sync-alt"></i>
                        Actualizar
                    </button>
                </div>
            </div>
        </section>

        <!-- Estadísticas del Panel -->
        <section class="admin-stats">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-box"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="total-products">0</h3>
                        <p>Total Productos</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-tags"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="total-categories">0</h3>
                        <p>Categorías</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="avg-price">$0</h3>
                        <p>Precio Promedio</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="featured-products">0</h3>
                        <p>Productos Destacados</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tabla de Productos -->
        <section class="admin-products">
            <div class="products-container">
                <div class="products-header">
                    <h2>Lista de Productos</h2>
                    <div class="products-actions">
                        <button id="view-trash-btn" class="btn btn-outline">
                            <i class="fas fa-trash"></i>
                            Papelera (<span id="trash-count">0</span>)
                        </button>
                    </div>
                </div>
                
                <div class="products-table-container">
                    <table class="products-table" id="products-table">
                        <thead>
                            <tr>
                                <th>Imagen</th>
                                <th>Nombre</th>
                                <th>Categoría</th>
                                <th>Precio</th>
                                <th>Stock</th>
                                <th>Estado</th>
                                <th>Destacado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="products-tbody">
                            <!-- Los productos se cargarán dinámicamente -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal de Confirmación de Eliminación -->
    <div id="delete-modal" class="modal-overlay" style="display: none;">
        <div class="modal-container delete-modal">
            <div class="modal-header">
                <h2>Confirmar Eliminación</h2>
                <button class="close-btn" id="close-delete-modal">×</button>
            </div>
            <div class="modal-body">
                <div class="delete-warning">
                    <i class="fas fa-exclamation-triangle"></i>
                    <p>¿Estás seguro de que deseas eliminar este producto?</p>
                    <p class="delete-product-name" id="delete-product-name"></p>
                    <p class="delete-warning-text">Esta acción no se puede deshacer.</p>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancel-delete">Cancelar</button>
                    <button type="button" class="btn btn-danger" id="confirm-delete">
                        <i class="fas fa-trash"></i>
                        Eliminar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Papelera -->
    <div id="trash-modal" class="modal-overlay" style="display: none;">
        <div class="modal-container trash-modal">
            <div class="modal-header">
                <h2>
                    <i class="fas fa-trash"></i>
                    Papelera de Productos
                </h2>
                <button class="close-btn" id="close-trash-modal">×</button>
            </div>
            <div class="modal-body">
                <div class="trash-info">
                    <p>Productos eliminados recientemente. Puedes recuperarlos o eliminarlos permanentemente.</p>
                </div>
                
                <div class="trash-table-container">
                    <table class="trash-table" id="trash-table">
                        <thead>
                            <tr>
                                <th>Imagen</th>
                                <th>Nombre</th>
                                <th>Categoría</th>
                                <th>Precio</th>
                                <th>Eliminado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="trash-tbody">
                            <!-- Los productos eliminados se cargarán dinámicamente -->
                        </tbody>
                    </table>
                </div>
                
                <div class="trash-empty" id="trash-empty" style="display: none;">
                    <div class="empty-state">
                        <i class="fas fa-trash-alt"></i>
                        <h3>Papelera Vacía</h3>
                        <p>No hay productos eliminados</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="assets/js/script.js"></script>
    <script src="assets/js/auth-enhanced.js"></script>
    <script src="assets/js/admin-panel.js"></script>
    
    <!-- Script de prueba -->
    <script>
        // Simular que el usuario ya está autenticado como admin
        localStorage.setItem('huertohogar_user_role', 'admin');
        localStorage.setItem('huertohogar_is_admin', 'true');
        
        // Esperar a que se cargue el DOM y luego inicializar
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM cargado, inicializando test...');
            
            // Simular el proceso de login automático
            setTimeout(() => {
                console.log('Simulando login automático...');
                showAdminPanel();
            }, 1000);
        });
    </script>
</body>
</html>
